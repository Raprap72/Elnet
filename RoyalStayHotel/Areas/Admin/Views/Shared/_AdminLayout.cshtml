<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Royal Stay Hotel Admin Dashboard" />
    <meta name="author" content="Royal Stay Hotel" />
    <title>@ViewBag.Title - Royal Stay Hotel Admin</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    
    <!-- Custom styles -->
    <link href="/css/admin.css" rel="stylesheet" />
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    
    <!-- DataTables -->
    <link href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
</head>
<body>
    <!-- Notification Toast Container -->
    <div aria-live="polite" aria-atomic="true" style="position: fixed; top: 1rem; right: 1rem; z-index: 1050; min-width: 300px;">
        <div id="notificationToasts" class="toast-container"></div>
    </div>

    <!-- TempData Toast Notifications -->
    @if (TempData["SuccessMessage"] != null)
    {
        <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000" style="display: none;">
            <div class="toast-header bg-success text-white">
                <i class="fas fa-check-circle mr-2"></i>
                <strong class="mr-auto">Success</strong>
                <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                @TempData["SuccessMessage"]
            </div>
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000" style="display: none;">
            <div class="toast-header bg-danger text-white">
                <i class="fas fa-exclamation-circle mr-2"></i>
                <strong class="mr-auto">Error</strong>
                <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                @TempData["ErrorMessage"]
            </div>
        </div>
    }

    @if (TempData["WarningMessage"] != null)
    {
        <div id="warningToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000" style="display: none;">
            <div class="toast-header bg-warning text-white">
                <i class="fas fa-exclamation-triangle mr-2"></i>
                <strong class="mr-auto">Warning</strong>
                <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                @TempData["WarningMessage"]
            </div>
        </div>
    }

    @if (TempData["InfoMessage"] != null)
    {
        <div id="infoToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000" style="display: none;">
            <div class="toast-header bg-info text-white">
                <i class="fas fa-info-circle mr-2"></i>
                <strong class="mr-auto">Information</strong>
                <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                @TempData["InfoMessage"]
            </div>
        </div>
    }

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-2 d-md-block bg-dark sidebar">
                <div class="sidebar-sticky pt-3">
                    <div class="text-center mb-4">
                        <img src="/images/logo.png" alt="Royal Stay Hotel" width="120" class="img-fluid" />
                        <h5 class="text-white mt-3">Royal Stay Hotel</h5>
                        <p class="text-white-50">Admin Dashboard</p>
                    </div>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Home" && ViewContext.RouteData.Values["action"]?.ToString() == "Index" ? "active" : "")" href="@Url.Action("Index", "Home", new { area = "Admin" })">
                                <i class="fas fa-tachometer-alt"></i>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Bookings" ? "active" : "")" href="@Url.Action("Index", "Bookings", new { area = "Admin" })">
                                <i class="fas fa-calendar-check"></i>
                                Bookings
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Room" ? "active" : "")" href="@Url.Action("Index", "Room", new { area = "Admin" })">
                                <i class="fas fa-bed"></i>
                                Rooms
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Service" ? "active" : "")" href="@Url.Action("Index", "Service", new { area = "Admin" })">
                                <i class="fas fa-concierge-bell"></i>
                                Services
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "User" ? "active" : "")" href="@Url.Action("Index", "User", new { area = "Admin" })">
                                <i class="fas fa-users"></i>
                                Users
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Payment" ? "active" : "")" href="@Url.Action("Index", "Payment", new { area = "Admin" })">
                                <i class="fas fa-credit-card"></i>
                                Payments
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Report" ? "active" : "")" href="@Url.Action("Index", "Report", new { area = "Admin" })">
                                <i class="fas fa-chart-line"></i>
                                Reports
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link @(ViewContext.RouteData.Values["controller"]?.ToString() == "Settings" ? "active" : "")" href="@Url.Action("Index", "Settings", new { area = "Admin" })">
                                <i class="fas fa-cog"></i>
                                Settings
                            </a>
                        </li>
                    </ul>
                    
                    <hr class="border-secondary" />
                    
                    <div class="text-center mb-3">
                        <a href="@Url.Action("Index", "Home", new { area = "" })" class="btn btn-outline-light btn-sm">
                            <i class="fas fa-external-link-alt mr-1"></i> Visit Website
                        </a>
                    </div>
                    
                    <div class="text-center">
                        <form asp-area="" asp-controller="Account" asp-action="Logout" method="post">
                            <button type="submit" class="btn btn-danger btn-sm">
                                <i class="fas fa-sign-out-alt mr-1"></i> Logout
                            </button>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <main role="main" class="col-md-10 ml-sm-auto px-4">
                <div class="pt-3 pb-2 mb-3 border-bottom">
                    <div class="d-flex justify-content-between align-items-center">
                        <h3>@ViewBag.Title</h3>
                        <div class="btn-toolbar">
                            <div class="dropdown mr-2">
                                <button class="btn btn-light dropdown-toggle" type="button" id="notificationsDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-bell"></i>
                                    <span class="badge badge-danger">3</span>
                                </button>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="notificationsDropdown">
                                    <h6 class="dropdown-header">Notifications</h6>
                                    <a class="dropdown-item" href="#">
                                        <div class="small text-gray-500">Today at 9:30 AM</div>
                                        <span>New booking received from John Doe</span>
                                    </a>
                                    <a class="dropdown-item" href="#">
                                        <div class="small text-gray-500">Today at 8:15 AM</div>
                                        <span>Payment confirmed for booking #1234</span>
                                    </a>
                                    <a class="dropdown-item" href="#">
                                        <div class="small text-gray-500">Yesterday at 4:45 PM</div>
                                        <span>Room cleaning request for Room #105</span>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item text-center small text-gray-500" href="#">View All Notifications</a>
                                </div>
                            </div>
                            <div class="dropdown">
                                <button class="btn btn-light dropdown-toggle" type="button" id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-user-circle mr-1"></i> Admin
                                </button>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                                    <a class="dropdown-item" href="#">
                                        <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i> Profile
                                    </a>
                                    <a class="dropdown-item" href="#">
                                        <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i> Settings
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <form asp-area="" asp-controller="Account" asp-action="Logout" method="post">
                                        <button type="submit" class="dropdown-item">
                                            <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i> Logout
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                @RenderBody()
            </main>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap4.min.js"></script>
    
    <script>
        $(document).ready(function() {
            // Initialize DataTables
            $('table.dataTable').DataTable();
            
            // Handle notifications
            function showNotification(type, message) {
                const toast = `
                    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="5000">
                        <div class="toast-header bg-${type} text-white">
                            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'danger' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'} mr-2"></i>
                            <strong class="mr-auto">${type.charAt(0).toUpperCase() + type.slice(1)}</strong>
                            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="toast-body">${message}</div>
                    </div>
                `;
                
                $('#notificationToasts').append(toast);
                $('.toast').toast('show');
                
                // Remove toast when hidden
                $('.toast').on('hidden.bs.toast', function() {
                    $(this).remove();
                });
            }
            
            // Show TempData toasts
            if ($('#successToast').length) {
                $('#successToast').appendTo('#notificationToasts').show();
                $('#successToast').toast('show');
            }
            
            if ($('#errorToast').length) {
                $('#errorToast').appendTo('#notificationToasts').show();
                $('#errorToast').toast('show');
            }
            
            if ($('#warningToast').length) {
                $('#warningToast').appendTo('#notificationToasts').show();
                $('#warningToast').toast('show');
            }
            
            if ($('#infoToast').length) {
                $('#infoToast').appendTo('#notificationToasts').show();
                $('#infoToast').toast('show');
            }
            
            // Custom event for programmatically triggering notifications
            $(document).on('showNotification', function(e, data) {
                showNotification(data.type, data.message);
            });
        });
    </script>
    
    @RenderSection("Scripts", required: false)
</body>
</html> 